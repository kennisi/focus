@import url('https://unpkg.com/normalize.css') layer(normalize);

@layer normalize, base, demo, snapping;

@layer snapping {
  @supports (animation-timeline: scroll()) {
    .scroller .snap-start, .scroller .snap-end { scroll-snap-align: unset; }
    .scroller .snap-start { --align: start; animation: snap both linear reverse; animation-timeline: scroll(nearest); animation-range: calc(var(--padding, 0) * 1px) 0; }
    .scroller .snap-end { --align: end; animation: snap both linear; animation-timeline: scroll(nearest); animation-range: calc(100% - (var(--padding, 0) * 1px)) 100%; }
    @keyframes snap { to { scroll-snap-align: var(--align, start); } }
  }
}

@layer demo {
  :root { --size: 300px; --radius: 32; --padding: 64px; --bg: hsl(180 0% 33%); --bar: hsl(0 0% 100% / 0.5); --panel: hsl(20 60% 50%); timeline-scope: --scroller; }

  .scroller { position: relative; width: clamp(300px, 50vmin, 600px); aspect-ratio: 3 / 4; resize: both; overflow: hidden; padding: 1rem; }

  .bar__thumb, .bar__track { opacity: 0; transition: opacity 0.2s; }
  [data-rounded-scroll='true'] .scroller :is(.bar__thumb, .bar__track) { opacity: 1; }

  .scroller > svg { position: absolute; top: 1rem; bottom: 1rem; right: 1rem; pointer-events: none; width: calc(var(--radius) * 2px); overflow: visible !important; z-index: 2; }

  /* ✅ 只隐藏滚动容器本体的原生滚动条 */
  [data-rounded-scroll='true'] .scroller > div::-webkit-scrollbar { display: none; }
  [data-rounded-scroll='true'] .scroller > div { scrollbar-width: none; -ms-overflow-style: none; }

  .scroller path { stroke-width: calc(var(--stroke-width) * 1px); }

  .bar__thumb { stroke: color-mix( in hsl, var(--color, #fff), #0000 calc((1 - var(--bar-alpha, 0.5)) * 100%) ); stroke-dasharray: var(--thumb-size) var(--track-length); }

  @supports (animation-timeline: scroll()) { .bar__thumb { animation: scroll both linear; animation-timeline: --scroller; } }

  .bar__track { stroke: hsl(0 0% 100% / var(--track-alpha, 0)); }

  .scroller > div { height: 100%; width: 100%; overflow: auto; background: light-dark(#fff, #000); border-radius: calc(var(--radius) * 1px); display: grid; grid-auto-flow: row; gap: 0; margin: 0; padding: calc(var(--padding) * 1px) 0; list-style-type: none; scroll-snap-type: y mandatory; scroll-timeline: --scroller; scroll-behavior: smooth; outline: 1px solid color-mix(in lch, canvas, canvasText); outline-offset: 1px; }

  .scroller > div > * { padding-inline: 1.25rem; }
}

/* ===== Modal wrapper (scoped) ===== */
#aboutMask { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; background: var(--bg1); z-index: 9999; pointer-events: auto; }
#aboutMask.is-open { display: flex; }

/* outer wrapper only does sizing/positioning (no visual card) */
#aboutModal { width: min(var(--maxCard), calc(100vw - 28px)); height: 70vh; max-height: 70vh; padding: 0 !important; box-sizing: border-box; position: relative; background: transparent !important; box-shadow: none !important; border-radius: 0 !important; overflow: visible !important; }

/* override demo scroller padding/position so it doesn't clip or offset inside 70vh */
#aboutModal .scroller { width: 100%; height: 100%; aspect-ratio: auto; resize: none; padding: 0 !important; overflow: hidden; }
#aboutModal .scroller > svg { top: 0 !important; bottom: 0 !important; right: 0 !important; }

/* the only visible “panel” */
#aboutModal .scroller > div { height: 100%; width: 100%; box-sizing: border-box; margin: 0; padding: calc(var(--padding) * 1px) 0; background: var(--bg2); outline: 1px solid var(--color3); outline-offset: 0; border-radius: calc(var(--radius) * 1px); }

/* close dot on mask layer (never clipped) */
#aboutCloseDot { position: fixed; width: 20px; height: 20px; border-radius: 999px; box-shadow: 0 6px 14px rgba(0,0,0,0.25); cursor: pointer; user-select: none; touch-action: manipulation; background: var(--red); z-index: 10000; }
#aboutMask.is-open #aboutCloseDot { top: 12px; left: 12px; }
